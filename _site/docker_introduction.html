<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="fromChinaBoy">

    <title>docker 入门 - BLOG</title>

    <link rel="canonical" href="http://localhost:4000/docker_introduction.html">

    <!-- Icons -->
  <link rel="shortcut icon" href="img/favicon.ico">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body ontouchstart="">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">BLOG</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
                <li>
                    <a href="/About.html">About</a>
                </li>
                
                <li>
                    <a href="/Tools.html">Tools</a>
                </li>
                
                <li>
                    <a href="/tags.html">Tags</a>
                </li>
                

            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<style type="text/css">
    header.intro-header{
        background-image: url('/img/fantasy.jpg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="Tags">
                        
                        <a class="tag" href="/Tags/#docker" title="docker">docker</a>
                        
                    </div>
                    <h1>docker 入门</h1>
                    
                    <span class="meta">Posted by zzhpeng on March 6, 2019</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container">

                <h1 id="简介">简介</h1>
<p>官网 <a href="https://www.docker.com/">Enterprise Container Platform | Docker</a>
手册 <a href="https://docs.docker.com/">Docker Documentation | Docker Documentation</a></p>

<h1 id="虚拟机与docker对比">虚拟机与docker对比</h1>
<p><a href="https://www.docker.com/resources/what-container">What is a Container | Docker</a></p>

<p><img src="http://img.zzhpeng.cn/FlUbUkJUdU9WSBqD9IBYzHZ3gkSp" alt="FlUbUkJUdU9WSBqD9IBYzHZ3gkSp" /></p>
<h1 id="docker-ce-和-docker-ee">docker-ce 和 docker-ee</h1>
<h3 id="about-docker-cecommunity-edition">About Docker CE（Community Edition）</h3>
<p>Docker Community Edition (CE) is ideal for developers and small teams looking to get started with Docker and experimenting with container-based apps. Docker CE has three types of update channels, stable, test, and nightly:</p>
<ul>
  <li>Stable gives you latest releases for general availability.</li>
  <li>Test gives pre-releases that are ready for testing before general availability.</li>
  <li>Nightly gives you latest builds of work in progress for the next major release.</li>
</ul>

<p>For more information about Docker CE, see Docker <a href="https://www.docker.com/community-edition/">click me</a>.</p>

<p>Releases： 每六个月发布一个大版本</p>

<h3 id="about-docker-eeenterprise-edition">About Docker EE（Enterprise Edition）</h3>
<p>Docker Enterprise is designed for enterprise development as well as IT teams who build, ship, and run business-critical applications in production and at scale. Docker Enterprise is integrated, certified, and supported to provide enterprises with the most secure container platform in the industry. For more info about Docker Enterprise, including purchasing options, see<a href="https://www.docker.com/enterprise-edition/"> Docker Enterprise</a>.</p>

<h3 id="docker-ce-和-docker-ee-对比">Docker CE 和 Docker EE 对比</h3>

<p><img src="http://img.zzhpeng.cn/FrnYjbS3hXBqxik_zQFpF-SiH-c5" alt="FrnYjbS3hXBqxik_zQFpF-SiH-c5" /></p>

<h1 id="docker安装">docker安装</h1>
<p>原始镜像地址会慢，可以用阿里、163等等提供的，不过要注册阿里等账号。</p>
<h3 id="1docker--get-docker-ce-for-ubuntu--docker-documentation">1、docker : <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">Get Docker CE for Ubuntu | Docker Documentation</a></h3>
<p>有很多安装途径，实在找不到对应的系统可以用 Binaries 包安装</p>

<h3 id="2docker-compose--install-docker-compose--docker-documentation">2、docker-compose : <a href="https://docs.docker.com/compose/install/">Install Docker Compose | Docker Documentation</a></h3>
<p>docker-compose 镜像组合技术 组合成服务service</p>

<h1 id="dockerfile-镜像构建">dockerfile 镜像构建</h1>
<p><a href="https://docs.docker.com/engine/reference/builder/">| Docker Documentation</a></p>
<h3 id="案例1构建一小时nodejs镜像">案例1，构建一小时nodejs镜像</h3>
<ul>
  <li>1、docker build –rm –tag nodejs_test .  （基于官网node:11-alpine镜像，构建镜像）</li>
  <li>2、docker run -it –rm –name node_test -v “$PWD/store_system/”:/usr/src/app -w /usr/src/app nodejs_test npm run dev</li>
</ul>

<p><img src="http://img.zzhpeng.cn/Frlszrq6fwzOO7WJjCdeIaEB80rG" alt="Frlszrq6fwzOO7WJjCdeIaEB80rG" /></p>

<h3 id="案例2构建一小时后端phpnginx开发环境">案例2，构建一小时后端php&amp;nginx开发环境</h3>
<p>php 相关资料 如何加扩展 <a href="https://hub.docker.com/_/php">Docker Hub</a></p>

<p>#创建镜像
#docker build –rm -t myphp:7.2-fpm .</p>

<p>#建立网络
#docker network create –subnet=172.23.0.0/16 net1</p>

<p>#启动容器
#docker run –rm -p 9000:9000 –name myphp -v $PWD/www/:/var/www/html/ -v $PWD/conf/php-fpm.conf:/usr/local/etc/php/php-fpm.d/php-fpm.conf -v $PWD/conf/php.ini:/usr/local/etc/php/php.ini –net=net1 –ip 172.23.0.2 -d myphp:7.2-fpm
#docker run –rm -p 8088:80 –name mynginx -v $PWD/www:/www -v $PWD/conf/nginx.conf:/etc/nginx/nginx.conf -v $PWD/conf/conf.d:/etc/nginx/conf.d/ -v $PWD/logs/:/var/log/nginx/ –net=net1 –ip 172.23.0.3 –link myphp:7.2-fpm -d nginx</p>

<h3 id="案例3构建python开发环境">案例3，构建python开发环境</h3>
<p>scrapy爬虫项目 <a href="https://github.com/LittleLory/codePool/tree/master/python/autohome_spider">codePool/python/autohome_spider at master · LittleLory/codePool · GitHub</a>
<img src="http://img.zzhpeng.cn/Fg7kWIhRoHX5GSrOs_Jl1VDXWla8" alt="Fg7kWIhRoHX5GSrOs_Jl1VDXWla8" /></p>

<h1 id="docker-compose-镜像组建管理工具">docker-compose 镜像组建管理工具</h1>
<p>Compose is a tool for defining and running complex applications with Docker. With Compose, you define a multi-container application in a single file, then spin your application up in a single command which does everything that needs to be done to get it running.
手册：<a href="https://docs.docker.com/compose/compose-file/">Compose file version 3 reference | Docker Documentation</a></p>

<p>项目地址：<a href="https://github.com/FromChinaBoy/dnmp">GitHub - FromChinaBoy/dnmp: Docker LNMP (Nginx, PHP7/PHP5, MySQL, Redis)</a></p>
<blockquote>
  <p>有关php72配置参数的解释
cap_add:
      - SYS_PTRACE</p>
</blockquote>

<p>因为有用到xdebug打断点，需要获取sys的拦截系统能力。</p>

<p>参考：<a href="https://www.cnblogs.com/catch/p/3476280.html">[译] 玩转ptrace (一) - twoon - 博客园</a></p>

<h1 id="docker-网络">docker 网络</h1>
<p>创建网段<br />
docker network create –subnet=172.18.0.0/16 net1</p>

<h3 id="docker的bridge网桥和虚拟机的网桥是不同的">docker的bridge网桥和虚拟机的网桥是不同的</h3>
<p><a href="https://docs.docker.com/network/bridge/">Use bridge networks | Docker Documentation</a></p>

<h3 id="docker-compose下的设置">docker-compose下的设置</h3>
<p><img src="http://img.zzhpeng.cn/FgW7P1v9FCatiIQMo-4xmqOx26Gm" alt="FgW7P1v9FCatiIQMo-4xmqOx26Gm" /></p>

<p>参考文献
<a href="https://github.com/buxiaomo/MarkdownBooks/blob/master/Docker%E5%85%A5%E9%97%A8%E7%BA%A7%E7%AE%80%E6%98%93%E6%89%8B%E5%86%8C.md">https://github.com/buxiaomo/MarkdownBooks/blob/master/Docker%E5%85%A5%E9%97%A8%E7%BA%A7%E7%AE%80%E6%98%93%E6%89%8B%E5%86%8C.md</a></p>



                <hr>

                <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png" /></a><br />本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND 4.0</a>进行许可。转载，请注明原作者 Zzhpeng 及本文源链接。

                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/mysql_create_user.html" data-toggle="tooltip" data-placement="top" title="mysql5.7创建用户">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/mysql_union_index.html" data-toggle="tooltip" data-placement="top" title="mysql联合索引">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                <!-- Utteranc -->

                <script src="https://utteranc.es/client.js"
                        repo="fromChinaBoy/fromChinaBoy.github.io"
                        issue-term="pathname"
                        theme="github-light"
                        crossorigin="anonymous"
                        async>
                </script>
                <!-- Share botton -->
                <!-- Go to www.addthis.com/dashboard to customize your tools --> <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5caaedc5f9567124"></script>

            </div>
        </div>
     </div>
  </article>
</script>

<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>

  
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <!-- kill the Facebook and Weibo -->
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    

                    
                    <li>
                        <a href="https://twitter.com/Azeril_Lapland">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    

                    
                    <li>
                        <a href="https://github.com/Azeril">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <!--
                    
                    <li>
                        <a href="http://www.douban.com/people/Azeril">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-douban fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    -->

                    <!--
                    
                    <li>
                        <a href="https://www.facebook.com/Azeril_Lapland">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    -->

                    
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/Azeril">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                    

                    <!--
                    
                    <li>
                        <a target="_blank" href="http://weibo.com/Azeril">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    -->

                </ul>
                <p class="copyright text-muted">
                &copy; 2011~2019 zzhpeng ♪ Powered by Jekyll.
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>




<!-- Highlight.js -->
<script>
    async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js",function(){
        hljs.initHighlightingOnLoad();
    })
</script>
<link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">


</body>

</html>